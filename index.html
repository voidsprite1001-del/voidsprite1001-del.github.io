<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>企业邮箱系统</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <!-- 自定义配置 -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#0A369D', // 深蓝色作为主色调
            'primary-light': '#366BCB', // 浅蓝色作为主色调变体
            secondary: '#3E63DD', // 中蓝色作为次要色调
            accent: '#60A5FA', // 浅蓝色作为强调色
            neutral: {
              100: '#F3F4F6',
              200: '#E5E7EB',
              300: '#D1D5DB',
              400: '#9CA3AF',
              500: '#6B7280',
              600: '#4B5563',
              700: '#374151',
              800: '#1F2937',
              900: '#111827',
            }
          },
          fontFamily: {
            sans: ['Helvetica Neue', 'Arial', 'sans-serif'],
          },
          boxShadow: {
            'card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
            'button': '0 2px 4px rgba(10, 54, 157, 0.2)',
            'dropdown': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
          }
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .bg-gradient-primary {
        background: linear-gradient(135deg, #0A369D 0%, #3E63DD 100%);
      }
      .bg-gradient-secondary {
        background: linear-gradient(135deg, #3E63DD 0%, #60A5FA 100%);
      }
      .transition-all-300 {
        transition: all 0.3s ease;
      }
    }
  </style>
</head>
<body class="bg-gray-50 text-neutral-800 font-sans antialiased transition-colors duration-300">
  <!-- 登录页面容器 -->
  <div id="login-container" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-primary/10">
    <div class="w-full max-w-md bg-white rounded-xl shadow-card overflow-hidden transition-all duration-300 hover:shadow-lg">
      <!-- 顶部品牌区域 -->
      <div class="bg-gradient-primary py-6 px-8 text-center">
        <div class="flex justify-center mb-4">
          <i class="fa fa-envelope text-white text-4xl"></i>
        </div>
        <h1 class="text-white text-[clamp(1.5rem,3vw,2rem)] font-bold text-shadow">企业邮箱系统</h1>
        <p class="text-blue-100 mt-2">专业、安全、高效的企业通信解决方案</p>
      </div>
      
      <!-- 登录表单 -->
      <div class="p-8">
        <form id="login-form" class="space-y-6">
          <div class="space-y-2">
            <label for="email" class="block text-sm font-medium text-neutral-700">企业邮箱</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-user text-neutral-400"></i>
              </div>
              <input type="email" id="email" name="email" placeholder="yourname@company.com" 
                     class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                     required>
            </div>
          </div>
          
          <div class="space-y-2">
            <div class="flex justify-between">
              <label for="password" class="block text-sm font-medium text-neutral-700">密码</label>
              <a href="#" class="text-sm text-primary hover:text-primary-light transition-colors duration-200">忘记密码?</a>
            </div>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-lock text-neutral-400"></i>
              </div>
              <input type="password" id="password" name="password" placeholder="请输入密码" 
                     class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                     required>
              <button type="button" id="toggle-password" class="absolute inset-y-0 right-0 pr-3 flex items-center">
                <i class="fa fa-eye text-neutral-400 hover:text-neutral-600 transition-colors duration-200"></i>
              </button>
            </div>
          </div>
          
          <div class="flex items-center">
            <input id="remember-me" name="remember-me" type="checkbox" 
                   class="h-4 w-4 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <label for="remember-me" class="ml-2 block text-sm text-neutral-600">
              记住我
            </label>
          </div>
          
          <button type="submit" 
                  class="w-full bg-primary hover:bg-primary-light text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2 transform hover:-translate-y-0.5 active:translate-y-0 shadow-button">
            登录
          </button>
          
          <div class="text-center">
            <p class="text-sm text-neutral-600">
              还没有企业邮箱? <button type="button" id="show-register" class="text-primary hover:text-primary-light font-medium transition-colors duration-200">立即注册</button>
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 注册页面容器 (默认隐藏) -->
  <div id="register-container" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-primary/10 hidden">
    <div class="w-full max-w-md bg-white rounded-xl shadow-card overflow-hidden transition-all duration-300 hover:shadow-lg">
      <!-- 顶部品牌区域 -->
      <div class="bg-gradient-primary py-6 px-8 text-center">
        <div class="flex justify-center mb-4">
          <i class="fa fa-envelope text-white text-4xl"></i>
        </div>
        <h1 class="text-white text-[clamp(1.5rem,3vw,2rem)] font-bold text-shadow">创建企业邮箱</h1>
        <p class="text-blue-100 mt-2">加入我们的专业企业通信平台</p>
      </div>
      
      <!-- 注册表单 -->
      <div class="p-8">
        <form id="register-form" class="space-y-6">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="space-y-2">
              <label for="first-name" class="block text-sm font-medium text-neutral-700">姓名</label>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="fa fa-user text-neutral-400"></i>
                </div>
                <input type="text" id="first-name" name="first-name" placeholder="您的姓名" 
                       class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                       required>
              </div>
            </div>
            <div class="space-y-2">
              <label for="position" class="block text-sm font-medium text-neutral-700">职位</label>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="fa fa-briefcase text-neutral-400"></i>
                </div>
                <input type="text" id="position" name="position" placeholder="您的职位" 
                       class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                       required>
              </div>
            </div>
          </div>
          
          <div class="space-y-2">
            <label for="company" class="block text-sm font-medium text-neutral-700">企业名称</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-building text-neutral-400"></i>
              </div>
              <input type="text" id="company" name="company" placeholder="您的企业名称" 
                     class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                     required>
            </div>
          </div>
          
          <div class="space-y-2">
            <label for="department" class="block text-sm font-medium text-neutral-700">部门</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-sitemap text-neutral-400"></i>
              </div>
              <select id="department" name="department" 
                      class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none appearance-none">
                <option value="">选择部门</option>
                <option value="hr">人力资源部</option>
                <option value="it">信息技术部</option>
                <option value="marketing">市场部</option>
                <option value="sales">销售部</option>
                <option value="finance">财务部</option>
                <option value="other">其他</option>
              </select>
              <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <i class="fa fa-chevron-down text-neutral-400"></i>
              </div>
            </div>
          </div>
          
          <div class="space-y-2">
            <label for="register-email" class="block text-sm font-medium text-neutral-700">邮箱地址</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-envelope text-neutral-400"></i>
              </div>
              <input type="email" id="register-email" name="email" placeholder="yourname@example.com" 
                     class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                     required>
            </div>
          </div>
          
          <div class="space-y-2">
            <label for="phone" class="block text-sm font-medium text-neutral-700">联系方式</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-phone text-neutral-400"></i>
              </div>
              <input type="tel" id="phone" name="phone" placeholder="您的联系电话" 
                     class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                     required>
            </div>
          </div>
          
          <div class="space-y-2">
            <label for="register-password" class="block text-sm font-medium text-neutral-700">设置密码</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-lock text-neutral-400"></i>
              </div>
              <input type="password" id="register-password" name="password" placeholder="至少8位字符" 
                     class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                     required minlength="8">
              <button type="button" id="toggle-register-password" class="absolute inset-y-0 right-0 pr-3 flex items-center">
                <i class="fa fa-eye text-neutral-400 hover:text-neutral-600 transition-colors duration-200"></i>
              </button>
            </div>
            <p class="text-xs text-neutral-500">密码必须包含字母、数字和特殊字符</p>
          </div>
          
          <div class="space-y-2">
            <label for="confirm-password" class="block text-sm font-medium text-neutral-700">确认密码</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-check-square text-neutral-400"></i>
              </div>
              <input type="password" id="confirm-password" name="confirm-password" placeholder="再次输入密码" 
                     class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none" 
                     required>
            </div>
          </div>
          
          <div class="space-y-2">
            <label for="user-role" class="block text-sm font-medium text-neutral-700">用户角色</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa fa-user-circle text-neutral-400"></i>
              </div>
              <select id="user-role" name="user-role" 
                      class="w-full pl-10 pr-3 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none appearance-none">
                <option value="employee">普通员工</option>
                <option value="manager">部门经理</option>
                <option value="admin">管理员</option>
                <option value="executive">高级管理人员</option>
              </select>
              <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                <i class="fa fa-chevron-down text-neutral-400"></i>
              </div>
            </div>
          </div>
          
          <div class="flex items-start">
            <input id="terms" name="terms" type="checkbox" 
                   class="h-4 w-4 mt-1 text-primary focus:ring-primary/50 border-neutral-300 rounded" required>
            <label for="terms" class="ml-2 block text-sm text-neutral-600">
              我同意 <a href="#" class="text-primary hover:text-primary-light">服务条款</a> 和 <a href="#" class="text-primary hover:text-primary-light">隐私政策</a>
            </label>
          </div>
          
          <button type="submit" 
                  class="w-full bg-primary hover:bg-primary-light text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2 transform hover:-translate-y-0.5 active:translate-y-0 shadow-button">
            注册
          </button>
          
          <div class="text-center">
            <p class="text-sm text-neutral-600">
              已有账号? <button type="button" id="show-login" class="text-primary hover:text-primary-light font-medium transition-colors duration-200">返回登录</button>
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 邮箱主界面容器 (默认隐藏) -->
  <div id="mail-container" class="hidden flex h-screen overflow-hidden bg-white">
    <!-- 侧边栏 -->
    <aside id="sidebar" class="w-64 bg-white border-r border-neutral-200 text-neutral-800 flex flex-col h-full transition-all duration-300 transform -translate-x-full md:translate-x-0">
      <!-- 品牌区域 -->
      <div class="p-4 border-b border-neutral-200 flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <i class="fa fa-envelope text-primary text-xl"></i>
          <h1 class="font-bold text-lg">企业邮箱</h1>
        </div>
        <div class="flex items-center space-x-2">
          <button id="theme-toggle" class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200">
            <i class="fa fa-moon-o"></i>
          </button>
          <button id="close-sidebar" class="md:hidden text-neutral-400 hover:text-neutral-600">
            <i class="fa fa-times"></i>
          </button>
        </div>
      </div>
      
      <!-- 侧边栏菜单 -->
      <nav class="flex-1 overflow-y-auto scrollbar-hide py-4">
        <div class="px-4 mb-4">
          <button id="compose-btn" class="w-full bg-primary hover:bg-primary-light text-white py-2 px-4 rounded-lg flex items-center justify-center space-x-2 transition-all duration-200 transform hover:-translate-y-0.5 active:translate-y-0 shadow-button">
            <i class="fa fa-pencil"></i>
            <span>写邮件</span>
          </button>
        </div>
        
        <!-- 主导航 -->
        <div class="px-4 pt-2 pb-1">
          <h3 class="text-xs font-semibold text-neutral-500 uppercase tracking-wider">主要功能</h3>
        </div>
        
        <ul class="space-y-1">
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 bg-primary/10 text-primary hover:bg-primary/20 rounded-lg transition-colors duration-200">
              <i class="fa fa-inbox w-6 text-center"></i>
              <span class="ml-3">收件箱</span>
              <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full">12</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-calendar w-6 text-center"></i>
              <span class="ml-3">日历</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-tasks w-6 text-center"></i>
              <span class="ml-3">任务</span>
              <span class="ml-auto bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">5</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-address-book w-6 text-center"></i>
              <span class="ml-3">联系人</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-folder w-6 text-center"></i>
              <span class="ml-3">文件</span>
            </a>
          </li>
        </ul>
        
        <div class="px-4 pt-6 pb-1">
          <h3 class="text-xs font-semibold text-neutral-500 uppercase tracking-wider">邮箱文件夹</h3>
        </div>
        
        <ul class="space-y-1">
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-clock-o w-6 text-center"></i>
              <span class="ml-3">草稿箱</span>
              <span class="ml-auto text-neutral-400 text-xs">3</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-paper-plane w-6 text-center"></i>
              <span class="ml-3">已发送</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-trash w-6 text-center"></i>
              <span class="ml-3">已删除</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-star w-6 text-center"></i>
              <span class="ml-3">星标邮件</span>
              <span class="ml-auto text-neutral-400 text-xs">5</span>
            </a>
          </li>
        </ul>
        
        <div class="px-4 pt-6 pb-1">
          <h3 class="text-xs font-semibold text-neutral-500 uppercase tracking-wider">分类</h3>
        </div>
        
        <ul class="space-y-1">
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-tag w-6 text-center text-yellow-500"></i>
              <span class="ml-3">工作</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-tag w-6 text-center text-red-500"></i>
              <span class="ml-3">重要</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center px-4 py-2.5 text-neutral-700 hover:bg-neutral-100 rounded-lg transition-colors duration-200">
              <i class="fa fa-tag w-6 text-center text-purple-500"></i>
              <span class="ml-3">项目</span>
            </a>
          </li>
          <li>
            <button class="flex items-center px-4 py-2.5 text-primary hover:bg-neutral-100 rounded-lg transition-colors duration-200 w-full text-left">
              <i class="fa fa-plus-circle w-6 text-center"></i>
              <span class="ml-3">添加分类</span>
            </button>
          </li>
        </ul>
      </nav>
      
      <!-- 用户信息 -->
      <div class="p-4 border-t border-neutral-200">
        <div class="flex items-center space-x-3">
          <img src="https://picsum.photos/id/1005/200/200" alt="用户头像" class="w-10 h-10 rounded-full object-cover border-2 border-neutral-200">
          <div class="flex-1 min-w-0">
            <p class="text-sm font-medium text-neutral-900 truncate">张三</p>
            <p class="text-xs text-neutral-500 truncate">zhangsan@company.com</p>
          </div>
          <button id="user-menu-btn" class="text-neutral-400 hover:text-neutral-600">
            <i class="fa fa-ellipsis-v"></i>
          </button>
        </div>
      </div>
    </aside>
    
    <!-- 主内容区 -->
    <main class="flex-1 flex flex-col overflow-hidden">
      <!-- 顶部导航 -->
      <header class="bg-primary text-white py-3 px-4 flex items-center justify-between z-10 shadow-md">
        <div class="flex items-center space-x-3">
          <button id="menu-toggle" class="md:hidden text-white hover:text-blue-200">
            <i class="fa fa-bars text-xl"></i>
          </button>
          <div class="relative">
            <input type="text" placeholder="搜索邮件、联系人、文件..." 
                   class="pl-10 pr-4 py-2 rounded-lg bg-primary-light/30 border border-primary-light/50 text-white placeholder-blue-200 focus:ring-2 focus:ring-white/30 focus:border-white transition-all duration-200 outline-none w-64 lg:w-80">
            <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-blue-200"></i>
          </div>
        </div>
        
        <div class="flex items-center space-x-4">
          <div class="hidden sm:flex items-center space-x-1">
            <span class="inline-flex items-center justify-center w-2 h-2 rounded-full bg-green-400 mr-1"></span>
            <span class="text-sm">在线</span>
          </div>
          <button class="text-white hover:text-blue-200 relative transition-colors duration-200">
            <i class="fa fa-bell text-xl"></i>
            <span class="absolute -top-1 -right-1 bg-red-500 rounded-full w-2 h-2"></span>
          </button>
          <button class="text-white hover:text-blue-200 transition-colors duration-200">
            <i class="fa fa-cog text-xl"></i>
          </button>
          <div class="flex items-center space-x-2 cursor-pointer group">
            <img src="https://picsum.photos/id/1005/200/200" alt="用户头像" class="w-8 h-8 rounded-full object-cover border-2 border-transparent group-hover:border-white transition-all duration-200">
            <span class="hidden md:inline-block font-medium text-sm">张三</span>
          </div>
        </div>
      </header>
      
      <!-- 邮件列表工具栏 -->
      <div class="bg-white border-b border-neutral-200 py-2 px-4 flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
            <i class="fa fa-check-square-o"></i>
          </button>
          <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
            <i class="fa fa-trash"></i>
          </button>
          <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
            <i class="fa fa-archive"></i>
          </button>
          <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
            <i class="fa fa-exclamation-circle"></i>
          </button>
          <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
            <i class="fa fa-star-o"></i>
          </button>
          <div class="hidden sm:block">
            <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
              <i class="fa fa-tag"></i>
            </button>
          </div>
          <div class="hidden md:block">
            <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
              <i class="fa fa-filter"></i>
            </button>
          </div>
        </div>
        
        <div class="flex items-center space-x-2">
          <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
            <i class="fa fa-chevron-left"></i>
          </button>
          <span class="text-sm text-neutral-600">1-20 共 148</span>
          <button class="p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-full transition-all duration-200">
            <i class="fa fa-chevron-right"></i>
          </button>
        </div>
      </div>
      
      <!-- 邮件列表 -->
      <div class="flex-1 overflow-y-auto p-4">
        <!-- 邮件项目 (未读) -->
        <div class="bg-white border border-blue-100 rounded-lg p-4 mb-3 cursor-pointer hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5">
          <div class="flex items-start">
            <input type="checkbox" class="mt-1 mr-3 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="font-bold text-neutral-900 truncate sm:max-w-xs">李经理</h3>
                <span class="text-sm text-neutral-500 whitespace-nowrap">09:30</span>
              </div>
              <div class="flex items-center justify-between mb-1">
                <h4 class="font-medium text-neutral-800 truncate sm:max-w-md">关于下周一的项目进度会议</h4>
                <div class="flex items-center space-x-1 text-xs bg-blue-100 text-primary px-2 py-0.5 rounded">
                  <i class="fa fa-calendar"></i>
                  <span>会议</span>
                </div>
              </div>
              <p class="text-sm text-neutral-600 truncate sm:hidden">请确认您是否能参加下周一上午10点的项目进度会议，谢谢！</p>
              <p class="text-sm text-neutral-600 hidden sm:block line-clamp-1">请确认您是否能参加下周一上午10点的项目进度会议，谢谢！</p>
            </div>
          </div>
        </div>
        
        <!-- 邮件项目 (未读) -->
        <div class="bg-white border border-blue-100 rounded-lg p-4 mb-3 cursor-pointer hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5">
          <div class="flex items-start">
            <input type="checkbox" class="mt-1 mr-3 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="font-bold text-neutral-900 truncate sm:max-w-xs">人力资源部</h3>
                <span class="text-sm text-neutral-500 whitespace-nowrap">昨天</span>
              </div>
              <div class="flex items-center justify-between mb-1">
                <div class="flex items-center">
                  <h4 class="font-medium text-neutral-800 truncate sm:max-w-md">2023年度员工培训计划</h4>
                  <span class="ml-2 text-neutral-400"><i class="fa fa-paperclip"></i></span>
                </div>
                <div class="flex items-center space-x-1 text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded">
                  <i class="fa fa-exclamation-circle"></i>
                  <span>重要</span>
                </div>
              </div>
              <p class="text-sm text-neutral-600 truncate sm:hidden">附件是2023年度员工培训计划，请查收并根据您的部门需求进行反馈。</p>
              <p class="text-sm text-neutral-600 hidden sm:block line-clamp-1">附件是2023年度员工培训计划，请查收并根据您的部门需求进行反馈。</p>
            </div>
          </div>
        </div>
        
        <!-- 邮件项目 (已读) -->
        <div class="bg-white border border-neutral-200 rounded-lg p-4 mb-3 cursor-pointer hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5">
          <div class="flex items-start">
            <input type="checkbox" class="mt-1 mr-3 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="text-neutral-700 font-medium truncate sm:max-w-xs">王总</h3>
                <span class="text-sm text-neutral-500 whitespace-nowrap">昨天</span>
              </div>
              <div class="flex items-center justify-between mb-1">
                <h4 class="text-neutral-700 truncate sm:max-w-md">季度财务报告审批</h4>
              </div>
              <p class="text-sm text-neutral-500 truncate sm:hidden">请审批本季度的财务报告，需要在本周五前完成。</p>
              <p class="text-sm text-neutral-500 hidden sm:block line-clamp-1">请审批本季度的财务报告，需要在本周五前完成。</p>
            </div>
          </div>
        </div>
        
        <!-- 邮件项目 (已读，带附件) -->
        <div class="bg-white border border-neutral-200 rounded-lg p-4 mb-3 cursor-pointer hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5">
          <div class="flex items-start">
            <input type="checkbox" class="mt-1 mr-3 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="text-neutral-700 font-medium truncate sm:max-w-xs">市场部</h3>
                <span class="text-sm text-neutral-500 whitespace-nowrap">周三</span>
              </div>
              <div class="flex items-center justify-between mb-1">
                <div class="flex items-center">
                  <h4 class="text-neutral-700 truncate sm:max-w-md">新产品发布会策划方案</h4>
                  <span class="ml-2 text-neutral-400"><i class="fa fa-paperclip"></i></span>
                </div>
                <div class="flex items-center space-x-1 text-xs bg-purple-100 text-purple-600 px-2 py-0.5 rounded">
                  <i class="fa fa-tag"></i>
                  <span>项目</span>
                </div>
              </div>
              <p class="text-sm text-neutral-500 truncate sm:hidden">附件是新产品发布会的策划方案，请提出您的宝贵意见。</p>
              <p class="text-sm text-neutral-500 hidden sm:block line-clamp-1">附件是新产品发布会的策划方案，请提出您的宝贵意见。</p>
            </div>
          </div>
        </div>
        
        <!-- 邮件项目 (已读) -->
        <div class="bg-white border border-neutral-200 rounded-lg p-4 mb-3 cursor-pointer hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5">
          <div class="flex items-start">
            <input type="checkbox" class="mt-1 mr-3 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="text-neutral-700 font-medium truncate sm:max-w-xs">技术部</h3>
                <span class="text-sm text-neutral-500 whitespace-nowrap">周二</span>
              </div>
              <div class="flex items-center justify-between mb-1">
                <h4 class="text-neutral-700 truncate sm:max-w-md">系统升级通知</h4>
              </div>
              <p class="text-sm text-neutral-500 truncate sm:hidden">系统将于本周末凌晨2点至6点进行升级维护，请提前做好准备。</p>
              <p class="text-sm text-neutral-500 hidden sm:block line-clamp-1">系统将于本周末凌晨2点至6点进行升级维护，请提前做好准备。</p>
            </div>
          </div>
        </div>
        
        <!-- 更多邮件项目 -->
        <div class="bg-white border border-neutral-200 rounded-lg p-4 mb-3 cursor-pointer hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5">
          <div class="flex items-start">
            <input type="checkbox" class="mt-1 mr-3 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="text-neutral-700 font-medium truncate sm:max-w-xs">客服中心</h3>
                <span class="text-sm text-neutral-500 whitespace-nowrap">周一</span>
              </div>
              <div class="flex items-center justify-between mb-1">
                <h4 class="text-neutral-700 truncate sm:max-w-md">客户反馈汇总</h4>
                <div class="flex items-center space-x-1 text-xs bg-yellow-100 text-yellow-600 px-2 py-0.5 rounded">
                  <i class="fa fa-tag"></i>
                  <span>工作</span>
                </div>
              </div>
              <p class="text-sm text-neutral-500 truncate sm:hidden">本月客户反馈汇总已整理完毕，请查阅并制定相应改进措施。</p>
              <p class="text-sm text-neutral-500 hidden sm:block line-clamp-1">本月客户反馈汇总已整理完毕，请查阅并制定相应改进措施。</p>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <!-- 邮件详情侧边栏 (默认隐藏) -->
    <aside id="email-detail-sidebar" class="w-full lg:w-96 bg-white border-l border-neutral-200 shadow-lg fixed lg:static top-0 right-0 h-full z-20 transform translate-x-full transition-transform duration-300 ease-in-out">
      <!-- 详情页头部 -->
      <div class="bg-primary text-white p-4 flex items-center justify-between">
        <h2 class="font-bold text-lg">邮件详情</h2>
        <div class="flex items-center space-x-2">
          <button class="text-white hover:text-blue-200 transition-colors duration-200 lg:hidden" id="close-email-detail">
            <i class="fa fa-times"></i>
          </button>
          <button class="text-white hover:text-blue-200 transition-colors duration-200">
            <i class="fa fa-expand"></i>
          </button>
        </div>
      </div>
      
      <!-- 邮件内容 -->
      <div class="p-6 overflow-y-auto h-[calc(100%-60px)]">
        <div class="mb-6">
          <div class="flex items-center justify-between mb-2">
            <h3 class="text-xl font-bold text-neutral-900">关于下周一的项目进度会议</h3>
            <div class="flex items-center space-x-3">
              <button class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200" title="星标">
                <i class="fa fa-star-o"></i>
              </button>
              <button class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200" title="更多选项">
                <i class="fa fa-ellipsis-v"></i>
              </button>
            </div>
          </div>
          
          <div class="flex items-center space-x-2 mb-4">
            <img src="https://picsum.photos/id/1012/200/200" alt="发件人头像" class="w-10 h-10 rounded-full object-cover">
            <div>
              <p class="font-medium text-neutral-900">李经理</p>
              <p class="text-sm text-neutral-500">lijingli@company.com</p>
            </div>
          </div>
          
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-sm">
            <div>
              <span class="text-neutral-500">收件人:</span> 
              <span class="text-neutral-900">zhangsan@company.com</span>
            </div>
            <div>
              <span class="text-neutral-500">日期:</span> 
              <span class="text-neutral-900">2023年6月15日 09:30</span>
            </div>
            <div>
              <span class="text-neutral-500">抄送人:</span> 
              <span class="text-neutral-900">wangzongjing@company.com</span>
            </div>
            <div>
              <span class="text-neutral-500">优先级:</span> 
              <span class="text-neutral-900">普通</span>
            </div>
          </div>
          
          <div class="border-t border-neutral-200 pt-6">
            <p class="text-neutral-800 mb-4 leading-relaxed">
              张三你好，
            </p>
            <p class="text-neutral-800 mb-4 leading-relaxed">
              希望这封邮件找到你时，你一切都好。我们计划在下周一（6月20日）上午10:00在公司会议室A举行项目进度会议，请你务必参加。
            </p>
            <p class="text-neutral-800 mb-4 leading-relaxed">
              在会议上，我们将讨论以下内容：
            </p>
            <ul class="list-disc pl-5 mb-4 space-y-2 text-neutral-800">
              <li>第一阶段项目完成情况回顾</li>
              <li>第二阶段工作安排和任务分配</li>
              <li>当前项目面临的挑战和解决方案</li>
              <li>各部门协作事项</li>
            </ul>
            <p class="text-neutral-800 mb-4 leading-relaxed">
              请提前准备相关材料，并思考可能的问题和建议。如有任何疑问，请随时与我联系。
            </p>
            <p class="text-neutral-800 leading-relaxed">
              期待你的参与和宝贵意见！
            </p>
            <p class="text-neutral-800 mt-4 leading-relaxed">
              此致<br>
              李经理<br>
              <span class="text-sm text-neutral-600 italic">技术部经理</span>
            </p>
          </div>
        </div>
        
        <!-- 附件区域 -->
        <div class="bg-neutral-50 rounded-lg p-4 mb-6">
          <h4 class="font-medium text-neutral-800 mb-3">附件</h4>
          <div class="space-y-2">
            <div class="flex items-center bg-white p-2 rounded border border-neutral-200">
              <i class="fa fa-file-pdf-o text-red-500 text-xl mr-3"></i>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-neutral-800 truncate">会议议程.pdf</p>
                <p class="text-xs text-neutral-500">2.4 MB</p>
              </div>
              <button class="text-primary hover:text-primary-light transition-colors duration-200">
                <i class="fa fa-download"></i>
              </button>
            </div>
            <div class="flex items-center bg-white p-2 rounded border border-neutral-200">
              <i class="fa fa-file-excel-o text-green-500 text-xl mr-3"></i>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-neutral-800 truncate">项目进度表.xlsx</p>
                <p class="text-xs text-neutral-500">1.8 MB</p>
              </div>
              <button class="text-primary hover:text-primary-light transition-colors duration-200">
                <i class="fa fa-download"></i>
              </button>
            </div>
          </div>
        </div>
        
        <!-- 相关任务/日历 -->
        <div class="bg-blue-50 rounded-lg p-4 mb-6">
          <div class="flex items-center justify-between mb-3">
            <h4 class="font-medium text-primary">快速操作</h4>
            <button class="text-primary hover:text-primary-light text-xs transition-colors duration-200">
              查看全部
            </button>
          </div>
          <div class="space-y-3">
            <button class="flex items-center justify-between w-full bg-white p-3 rounded-lg border border-blue-100 hover:border-blue-200 transition-colors duration-200">
              <div class="flex items-center">
                <i class="fa fa-calendar-plus-o text-primary mr-3"></i>
                <span class="text-sm text-neutral-800">添加到日历</span>
              </div>
              <i class="fa fa-chevron-right text-neutral-400"></i>
            </button>
            <button class="flex items-center justify-between w-full bg-white p-3 rounded-lg border border-blue-100 hover:border-blue-200 transition-colors duration-200">
              <div class="flex items-center">
                <i class="fa fa-tasks text-primary mr-3"></i>
                <span class="text-sm text-neutral-800">创建任务</span>
              </div>
              <i class="fa fa-chevron-right text-neutral-400"></i>
            </button>
          </div>
        </div>
        
        <!-- 回复区域 -->
        <div class="mt-8">
          <div class="flex items-center space-x-2 mb-4 flex-wrap gap-2">
            <button class="flex items-center justify-center space-x-1 px-4 py-2 bg-primary hover:bg-primary-light text-white rounded-lg transition-colors duration-200 shadow-button">
              <i class="fa fa-reply"></i>
              <span>回复</span>
            </button>
            <button class="flex items-center justify-center space-x-1 px-4 py-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 rounded-lg transition-colors duration-200">
              <i class="fa fa-reply-all"></i>
              <span>全部回复</span>
            </button>
            <button class="flex items-center justify-center space-x-1 px-4 py-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 rounded-lg transition-colors duration-200">
              <i class="fa fa-forward"></i>
              <span>转发</span>
            </button>
          </div>
          
          <!-- 快速回复 -->
          <div class="border border-neutral-200 rounded-lg overflow-hidden">
            <textarea placeholder="输入回复内容..." rows="3" 
                      class="w-full px-4 py-3 border-none focus:outline-none resize-none"></textarea>
            <div class="p-3 bg-neutral-50 border-t border-neutral-200 flex items-center justify-between">
              <div class="flex items-center space-x-3">
                <button class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200">
                  <i class="fa fa-paperclip"></i>
                </button>
                <button class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200">
                  <i class="fa fa-smile-o"></i>
                </button>
              </div>
              <button class="px-4 py-2 bg-primary hover:bg-primary-light text-white rounded-lg transition-colors duration-200 shadow-button">
                发送
              </button>
            </div>
          </div>
        </div>
      </div>
    </aside>
    
    <!-- 写邮件模态框 (默认隐藏) -->
    <div id="compose-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 hidden">
      <div class="bg-white rounded-xl shadow-dropdown w-full max-w-3xl max-h-[90vh] flex flex-col transform transition-all duration-300">
        <!-- 模态框头部 -->
        <div class="flex items-center justify-between p-4 border-b border-neutral-200 bg-primary text-white">
          <h3 class="font-bold text-lg">写邮件</h3>
          <div class="flex items-center space-x-2">
            <button class="text-white hover:text-blue-200 transition-colors duration-200" title="最小化">
              <i class="fa fa-window-minimize"></i>
            </button>
            <button class="text-white hover:text-blue-200 transition-colors duration-200" title="最大化">
              <i class="fa fa-window-maximize"></i>
            </button>
            <button id="close-compose" class="text-white hover:text-blue-200 transition-colors duration-200" title="关闭">
              <i class="fa fa-times"></i>
            </button>
          </div>
        </div>
        
        <!-- 邮件编辑区域 -->
        <form class="flex-1 overflow-y-auto">
          <div class="p-4 border-b border-neutral-200">
            <label for="to" class="block text-sm font-medium text-neutral-700 mb-1">收件人</label>
            <input type="email" id="to" name="to" placeholder="输入收件人邮箱地址" 
                   class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none">
          </div>
          
          <div class="p-4 border-b border-neutral-200">
            <label for="cc" class="block text-sm font-medium text-neutral-700 mb-1">抄送</label>
            <input type="email" id="cc" name="cc" placeholder="输入抄送邮箱地址 (可选)" 
                   class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none">
          </div>
          
          <div class="p-4 border-b border-neutral-200">
            <label for="subject" class="block text-sm font-medium text-neutral-700 mb-1">主题</label>
            <input type="text" id="subject" name="subject" placeholder="邮件主题" 
                   class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none">
          </div>
          
          <div class="p-4 border-b border-neutral-200">
            <div class="flex flex-wrap gap-2 items-center mb-3 border-b border-neutral-200 pb-2">
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="格式">
                <i class="fa fa-font"></i>
              </button>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="段落">
                <i class="fa fa-paragraph"></i>
              </button>
              <div class="h-4 border-r border-neutral-300 mx-1"></div>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1 font-bold" title="粗体">
                <i class="fa fa-bold"></i>
              </button>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1 italic" title="斜体">
                <i class="fa fa-italic"></i>
              </button>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1 underline" title="下划线">
                <i class="fa fa-underline"></i>
              </button>
              <div class="h-4 border-r border-neutral-300 mx-1"></div>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="列表">
                <i class="fa fa-list-ul"></i>
              </button>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="编号列表">
                <i class="fa fa-list-ol"></i>
              </button>
              <div class="h-4 border-r border-neutral-300 mx-1"></div>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="插入链接">
                <i class="fa fa-link"></i>
              </button>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="插入图片">
                <i class="fa fa-picture-o"></i>
              </button>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="插入附件">
                <i class="fa fa-paperclip"></i>
              </button>
              <button type="button" class="text-neutral-700 hover:text-primary transition-colors duration-200 px-2 py-1" title="表情">
                <i class="fa fa-smile-o"></i>
              </button>
            </div>
            
            <textarea id="email-body" name="email-body" rows="12" placeholder="请输入邮件内容..." 
                      class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 outline-none resize-none"></textarea>
          </div>
          
          <!-- 附件区域 -->
          <div class="p-4 border-b border-neutral-200 hidden">
            <h4 class="font-medium text-neutral-800 mb-3">附件</h4>
            <div class="space-y-2" id="attachments-container">
              <!-- 附件会在这里显示 -->
            </div>
          </div>
        </form>
        
        <!-- 底部操作区 -->
        <div class="p-4 border-t border-neutral-200 flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <button class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200">
              <i class="fa fa-save mr-1"></i> 保存草稿
            </button>
            <button class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200">
              <i class="fa fa-clock-o mr-1"></i> 定时发送
            </button>
            <button class="text-neutral-500 hover:text-neutral-700 transition-colors duration-200">
              <i class="fa fa-tag mr-1"></i> 添加分类
            </button>
          </div>
          <button type="submit" 
                  class="bg-primary hover:bg-primary-light text-white font-medium py-2 px-6 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2 transform hover:-translate-y-0.5 active:translate-y-0 shadow-button">
            <i class="fa fa-paper-plane mr-1"></i> 发送
          </button>
        </div>
      </div>
    </div>
    
    <!-- 日历视图 (默认隐藏) -->
    <div id="calendar-view" class="hidden flex-1 flex flex-col">
      <div class="p-4 border-b border-neutral-200 bg-white">
        <h2 class="text-xl font-bold text-neutral-900">日历</h2>
      </div>
      <div class="flex-1 p-4 overflow-y-auto">
        <!-- 日历内容占位 -->
        <div class="bg-white rounded-lg shadow-card p-6">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-lg font-semibold text-neutral-900">2023年6月</h3>
            <div class="flex items-center space-x-2">
              <button class="p-2 text-neutral-500 hover:text-neutral-700 rounded-full transition-colors duration-200">
                <i class="fa fa-chevron-left"></i>
              </button>
              <button class="px-3 py-1 bg-primary text-white rounded-lg text-sm transition-colors duration-200">今天</button>
              <button class="p-2 text-neutral-500 hover:text-neutral-700 rounded-full transition-colors duration-200">
                <i class="fa fa-chevron-right"></i>
              </button>
            </div>
          </div>
          <!-- 日历表格 -->
          <div class="grid grid-cols-7 gap-1 text-center mb-6">
            <div class="text-sm font-medium text-neutral-500 py-2">周日</div>
            <div class="text-sm font-medium text-neutral-500 py-2">周一</div>
            <div class="text-sm font-medium text-neutral-500 py-2">周二</div>
            <div class="text-sm font-medium text-neutral-500 py-2">周三</div>
            <div class="text-sm font-medium text-neutral-500 py-2">周四</div>
            <div class="text-sm font-medium text-neutral-500 py-2">周五</div>
            <div class="text-sm font-medium text-neutral-500 py-2">周六</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // 页面切换功能
    document.addEventListener('DOMContentLoaded', function() {
      // 获取DOM元素
      const loginContainer = document.getElementById('login-container');
      const registerContainer = document.getElementById('register-container');
      const mailContainer = document.getElementById('mail-container');
      const emailDetailSidebar = document.getElementById('email-detail-sidebar');
      const composeModal = document.getElementById('compose-modal');
      const calendarView = document.getElementById('calendar-view');
      const emailsList = document.querySelector('.space-y-2');
      const composeForm = composeModal.querySelector('form');
      const emailBody = document.getElementById('email-body');
      const emailDetailContent = document.getElementById('email-detail-content');
      
      // API基础URL
      const API_BASE_URL = 'http://localhost:5000/api';
      
      // 当前选中的邮件文件夹
      let currentFolder = 'inbox';
      // 当前用户信息
      let currentUser = null;
      
      // 辅助函数：显示加载指示器
      function showLoading(element) {
        element.innerHTML = '<div class="flex justify-center items-center py-8"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div></div>';
      }
      
      // 辅助函数：显示错误消息
      function showError(element, message) {
        element.innerHTML = `<div class="text-center py-8 text-red-500">${message}</div>`;
      }
      
      // 辅助函数：显示空状态
      function showEmptyState(element, message) {
        element.innerHTML = `<div class="text-center py-12 text-neutral-500">
          <i class="fa fa-inbox text-4xl mb-4"></i>
          <p>${message}</p>
        </div>`;
      }
      
      // 辅助函数：格式化日期
      function formatDate(timestamp) {
        const date = new Date(timestamp);
        const now = new Date();
        const isToday = date.toDateString() === now.toDateString();
        
        if (isToday) {
          return date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
        } else {
          return date.toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric' });
        }
      }
      
      // 初始化应用
      function initApp() {
        // 检查登录状态
        checkAuthStatus();
        
        // 切换到注册页面
        document.getElementById('show-register').addEventListener('click', function() {
          loginContainer.classList.add('hidden');
          registerContainer.classList.remove('hidden');
        });
        
        // 切换到登录页面
        document.getElementById('show-login').addEventListener('click', function() {
          registerContainer.classList.add('hidden');
          loginContainer.classList.remove('hidden');
        });
        
        // 登录功能
        document.getElementById('login-form').addEventListener('submit', handleLogin);
        
        // 注册功能
        document.getElementById('register-form').addEventListener('submit', handleRegister);
        
        // 显示/隐藏密码功能
        document.getElementById('toggle-password').addEventListener('click', togglePasswordVisibility.bind(null, 'password'));
        
        // 显示/隐藏注册密码功能
        document.getElementById('toggle-register-password').addEventListener('click', togglePasswordVisibility.bind(null, 'register-password'));
        
        // 移动端菜单切换
        document.getElementById('menu-toggle').addEventListener('click', toggleSidebar);
        
        // 关闭侧边栏
        document.getElementById('close-sidebar').addEventListener('click', closeSidebar);
        
        // 写邮件功能
        document.getElementById('compose-btn').addEventListener('click', openComposeModal);
        
        // 关闭写邮件模态框
        document.getElementById('close-compose').addEventListener('click', closeComposeModal);
        
        // 主题切换功能
        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
        
        // 点击模态框背景关闭模态框
        composeModal.addEventListener('click', function(e) {
          if (e.target === composeModal) {
            closeComposeModal();
          }
        });
        
        // 侧边栏导航项点击事件
        document.querySelectorAll('nav a').forEach(navItem => {
          navItem.addEventListener('click', handleNavigation);
        });
        
        // 处理窗口大小变化，确保响应式布局正确
        window.addEventListener('resize', handleResize);
        
        // 发送邮件表单提交
        composeForm.addEventListener('submit', handleSendEmail);
        
        // 关闭邮件详情
        document.getElementById('close-email-detail').addEventListener('click', closeEmailDetail);
        
        // 邮件删除功能
        document.getElementById('delete-email').addEventListener('click', handleDeleteEmail);
      }
      
      // 检查登录状态
      async function checkAuthStatus() {
        try {
          const response = await fetch(`${API_BASE_URL}/check-auth`);
          const data = await response.json();
          
          if (data.authenticated) {
            currentUser = data.user;
            loginContainer.classList.add('hidden');
            mailContainer.classList.remove('hidden');
            loadUserInfo();
            loadEmails('inbox');
          } else {
            loginContainer.classList.remove('hidden');
            mailContainer.classList.add('hidden');
          }
        } catch (error) {
          console.error('检查登录状态失败:', error);
        }
      }
      
      // 加载用户信息
      function loadUserInfo() {
        if (currentUser) {
          const userInfoElement = document.querySelector('.flex items-center space-x-3');
          userInfoElement.innerHTML = `
            <div class="h-10 w-10 rounded-full bg-primary text-white flex items-center justify-center">
              ${currentUser.name.charAt(0).toUpperCase()}
            </div>
            <div>
              <div class="font-medium">${currentUser.name}</div>
              <div class="text-sm text-neutral-500">${currentUser.email}</div>
            </div>
          `;
        }
      }
      
      // 处理登录
      async function handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const loginButton = this.querySelector('button[type="submit"]');
        const originalText = loginButton.innerHTML;
        
        try {
          // 显示加载状态
          loginButton.disabled = true;
          loginButton.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i>登录中...';
          
          const response = await fetch(`${API_BASE_URL}/login`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, password })
          });
          
          const data = await response.json();
          
          if (data.success) {
            currentUser = data.user;
            loginContainer.classList.add('hidden');
            mailContainer.classList.remove('hidden');
            loadUserInfo();
            loadEmails('inbox');
          } else {
            alert(data.error || '登录失败');
          }
        } catch (error) {
          console.error('登录失败:', error);
          alert('登录失败，请稍后重试');
        } finally {
          // 恢复按钮状态
          loginButton.disabled = false;
          loginButton.innerHTML = originalText;
        }
      }
      
      // 处理注册
      async function handleRegister(e) {
        e.preventDefault();
        const name = document.getElementById('first-name').value;
        const company = document.getElementById('company').value;
        const department = document.getElementById('department').value;
        const position = document.getElementById('position').value;
        const phone = document.getElementById('phone').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;
        const role = document.getElementById('role').value;
        const registerButton = this.querySelector('button[type="submit"]');
        const originalText = registerButton.innerHTML;
        
        try {
          // 显示加载状态
          registerButton.disabled = true;
          registerButton.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i>注册中...';
          
          const response = await fetch(`${API_BASE_URL}/register`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ 
              name, company, department, position, phone, email, password, role 
            })
          });
          
          const data = await response.json();
          
          if (data.success) {
            alert('注册成功！请登录您的新账号。');
            registerContainer.classList.add('hidden');
            loginContainer.classList.remove('hidden');
          } else {
            alert(data.error || '注册失败');
          }
        } catch (error) {
          console.error('注册失败:', error);
          alert('注册失败，请稍后重试');
        } finally {
          // 恢复按钮状态
          registerButton.disabled = false;
          registerButton.innerHTML = originalText;
        }
      }
      
      // 切换密码可见性
      function togglePasswordVisibility(inputId) {
        const passwordInput = document.getElementById(inputId);
        const toggleButton = document.getElementById(inputId.includes('register') ? 'toggle-register-password' : 'toggle-password');
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        const icon = toggleButton.querySelector('i');
        icon.classList.toggle('fa-eye');
        icon.classList.toggle('fa-eye-slash');
      }
      
      // 切换侧边栏
      function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('-translate-x-full');
      }
      
      // 关闭侧边栏
      function closeSidebar() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.add('-translate-x-full');
      }
      
      // 加载邮件列表
      async function loadEmails(folder) {
        if (!currentUser) return;
        
        currentFolder = folder;
        showLoading(emailsList);
        
        try {
          const response = await fetch(`${API_BASE_URL}/emails/${folder}`);
          const data = await response.json();
          
          if (data.emails && data.emails.length > 0) {
            renderEmailsList(data.emails);
          } else {
            showEmptyState(emailsList, folder === 'inbox' ? '收件箱为空' : `${folder}文件夹为空`);
          }
        } catch (error) {
          console.error('加载邮件失败:', error);
          showError(emailsList, '加载邮件失败，请稍后重试');
        }
      }
      
      // 渲染邮件列表
      function renderEmailsList(emails) {
        emailsList.innerHTML = '';
        
        emails.forEach(email => {
          const isSentFolder = currentFolder === 'sent';
          const senderOrRecipient = isSentFolder ? `收件人: ${email.to}` : `${email.from_name} <${email.from}>`;
          
          const emailElement = document.createElement('div');
          emailElement.className = `flex items-center p-4 border-b border-neutral-200 hover:bg-neutral-50 transition-colors duration-200 cursor-pointer ${!email.read ? 'bg-blue-50' : 'bg-white'} rounded-lg`;
          emailElement.dataset.emailId = email.id;
          emailElement.innerHTML = `
            <input type="checkbox" class="mr-3 h-4 w-4 text-primary focus:ring-primary/50 border-neutral-300 rounded">
            <div class="flex-shrink-0 mr-3 text-neutral-500">
              <i class="fa ${email.starred ? 'fa-star text-yellow-400' : 'fa-star-o'}"></i>
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center justify-between mb-1">
                <h3 class="text-sm font-medium text-neutral-900 truncate ${!email.read ? 'font-bold' : ''}">${senderOrRecipient}</h3>
                <span class="text-xs text-neutral-500 whitespace-nowrap ml-2">${formatDate(email.timestamp)}</span>
              </div>
              <div class="flex items-center justify-between">
                <p class="text-sm text-neutral-700 truncate ${!email.read ? 'font-semibold' : ''}">${email.subject}</p>
                ${email.attachments && email.attachments.length > 0 ? 
                  '<i class="fa fa-paperclip text-neutral-400 ml-2"></i>' : ''}
              </div>
              <p class="text-xs text-neutral-500 truncate mt-1">${email.body.substring(0, 100)}${email.body.length > 100 ? '...' : ''}</p>
            </div>
          `;
          
          // 添加点击事件
          emailElement.addEventListener('click', function(e) {
            // 忽略复选框点击
            if (e.target.type === 'checkbox' || e.target.closest('input[type="checkbox"]')) {
              return;
            }
            
            loadEmailDetail(email.id, currentFolder);
          });
          
          emailsList.appendChild(emailElement);
        });
      }
      
      // 加载邮件详情
      async function loadEmailDetail(emailId, folder) {
        if (!currentUser) return;
        
        showLoading(emailDetailContent);
        
        try {
          const response = await fetch(`${API_BASE_URL}/email/${emailId}/${folder}`);
          const email = await response.json();
          
          if (email.error) {
            showError(emailDetailContent, email.error);
            return;
          }
          
          renderEmailDetail(email);
          emailDetailSidebar.classList.remove('translate-x-full');
          
          // 在移动端，隐藏侧边栏
          if (window.innerWidth < 768) {
            closeSidebar();
          }
        } catch (error) {
          console.error('加载邮件详情失败:', error);
          showError(emailDetailContent, '加载邮件详情失败，请稍后重试');
        }
      }
      
      // 渲染邮件详情
      function renderEmailDetail(email) {
        const isSentFolder = currentFolder === 'sent';
        
        emailDetailContent.innerHTML = `
          <div class="border-b border-neutral-200 pb-4">
            <h2 class="text-xl font-bold text-neutral-900 mb-2">${email.subject}</h2>
            <div class="flex items-center justify-between text-sm text-neutral-500">
              <span>${formatDate(email.timestamp)}</span>
              <div class="flex items-center space-x-1">
                <button class="p-1 hover:text-primary transition-colors duration-200" title="${email.starred ? '取消星标' : '标记星标'}">
                  <i class="fa ${email.starred ? 'fa-star text-yellow-400' : 'fa-star-o'}"></i>
                </button>
                <button class="p-1 hover:text-primary transition-colors duration-200" title="${email.important ? '取消重要' : '标记重要'}">
                  <i class="fa ${email.important ? 'fa-flag text-red-500' : 'fa-flag-o'}"></i>
                </button>
              </div>
            </div>
          </div>
          
          <div class="py-4 border-b border-neutral-200">
            <div class="flex flex-col space-y-2">
              <div>
                <span class="font-medium text-neutral-700">${isSentFolder ? '收件人' : '发件人'}:</span> 
                <span class="text-primary">${isSentFolder ? email.to : `${email.from_name} <${email.from}>`}</span>
              </div>
              ${email.cc ? `<div><span class="font-medium text-neutral-700">抄送:</span> <span class="text-primary">${email.cc}</span></div>` : ''}
            </div>
          </div>
          
          <div class="py-4 border-b border-neutral-200">
            <div class="prose max-w-none">${email.body.replace(/\n/g, '<br>')}</div>
          </div>
          
          ${email.attachments && email.attachments.length > 0 ? `
            <div class="py-4 border-b border-neutral-200">
              <h3 class="font-medium text-neutral-700 mb-3">附件</h3>
              <div class="space-y-2">
                ${email.attachments.map(attachment => `
                  <div class="flex items-center p-3 bg-neutral-50 rounded-lg">
                    <i class="fa fa-file-o text-neutral-500 mr-3 text-xl"></i>
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-medium text-neutral-800 truncate">${attachment.name}</p>
                      <p class="text-xs text-neutral-500">${attachment.size}</p>
                    </div>
                    <button class="ml-3 text-primary hover:text-primary-light transition-colors duration-200">
                      <i class="fa fa-download"></i>
                    </button>
                  </div>
                `).join('')}
              </div>
            </div>
          ` : ''}
        `;
        
        // 存储当前查看的邮件信息
        emailDetailSidebar.dataset.emailId = email.id;
        emailDetailSidebar.dataset.folder = currentFolder;
      }
      
      // 关闭邮件详情
      function closeEmailDetail() {
        emailDetailSidebar.classList.add('translate-x-full');
      }
      
      // 处理删除邮件
      async function handleDeleteEmail() {
        const emailId = emailDetailSidebar.dataset.emailId;
        const folder = emailDetailSidebar.dataset.folder;
        
        if (!emailId || !folder) return;
        
        if (confirm('确定要删除这封邮件吗？')) {
          try {
            const response = await fetch(`${API_BASE_URL}/email/${emailId}/${folder}`, {
              method: 'DELETE'
            });
            
            const data = await response.json();
            
            if (data.success) {
              closeEmailDetail();
              loadEmails(currentFolder);
            } else {
              alert(data.error || '删除邮件失败');
            }
          } catch (error) {
            console.error('删除邮件失败:', error);
            alert('删除邮件失败，请稍后重试');
          }
        }
      }
      
      // 打开写邮件模态框
      function openComposeModal() {
        composeForm.reset();
        composeModal.classList.remove('hidden');
        
        // 平滑过渡效果
        setTimeout(() => {
          const modalContent = composeModal.querySelector('div');
          modalContent.classList.add('scale-100');
        }, 10);
      }
      
      // 关闭写邮件模态框
      function closeComposeModal() {
        const modalContent = composeModal.querySelector('div');
        modalContent.classList.remove('scale-100');
        setTimeout(() => {
          composeModal.classList.add('hidden');
        }, 200);
      }
      
      // 处理发送邮件
      async function handleSendEmail(e) {
        e.preventDefault();
        
        const to = document.getElementById('to').value;
        const cc = document.getElementById('cc').value;
        const subject = document.getElementById('subject').value;
        const body = document.getElementById('email-body').value;
        const sendButton = this.querySelector('button[type="submit"]');
        const originalText = sendButton.innerHTML;
        
        if (!to || !subject || !body) {
          alert('请填写收件人、主题和邮件内容');
          return;
        }
        
        try {
          // 显示发送中状态
          sendButton.disabled = true;
          sendButton.innerHTML = '<i class="fa fa-paper-plane mr-1"></i> 发送中...';
          
          const response = await fetch(`${API_BASE_URL}/send-email`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ to, cc, subject, body })
          });
          
          const data = await response.json();
          
          if (data.success) {
            closeComposeModal();
            // 自动切换到收件箱并刷新
            loadEmails('inbox');
            
            // 显示成功提示
            const notification = document.createElement('div');
            notification.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
            notification.textContent = '邮件发送成功';
            document.body.appendChild(notification);
            
            setTimeout(() => {
              notification.remove();
            }, 3000);
          } else {
            alert(data.error || '发送邮件失败');
          }
        } catch (error) {
          console.error('发送邮件失败:', error);
          alert('发送邮件失败，请稍后重试');
        } finally {
          // 恢复按钮状态
          sendButton.disabled = false;
          sendButton.innerHTML = originalText;
        }
      }
      
      // 切换主题
      function toggleTheme() {
        const html = document.documentElement;
        html.classList.toggle('dark');
        
        // 更新主题图标
        const icon = this.querySelector('i');
        if (html.classList.contains('dark')) {
          icon.classList.remove('fa-moon-o');
          icon.classList.add('fa-sun-o');
        } else {
          icon.classList.remove('fa-sun-o');
          icon.classList.add('fa-moon-o');
        }
      }
      
      // 处理导航
      function handleNavigation(e) {
        e.preventDefault();
        
        // 移除所有导航项的选中状态
        document.querySelectorAll('nav a').forEach(item => {
          item.classList.remove('bg-primary/10', 'text-primary');
          item.classList.add('text-neutral-700');
        });
        
        // 添加当前导航项的选中状态
        this.classList.add('bg-primary/10', 'text-primary');
        this.classList.remove('text-neutral-700');
        
        // 根据导航项切换视图
        if (this.querySelector('.fa-inbox')) {
          document.querySelector('main').classList.remove('hidden');
          calendarView.classList.add('hidden');
          loadEmails('inbox');
        } else if (this.querySelector('.fa-paper-plane')) {
          document.querySelector('main').classList.remove('hidden');
          calendarView.classList.add('hidden');
          loadEmails('sent');
        } else if (this.querySelector('.fa-calendar')) {
          document.querySelector('main').classList.add('hidden');
          calendarView.classList.remove('hidden');
        }
        
        // 在移动端，点击导航项后关闭侧边栏
        if (window.innerWidth < 768) {
          closeSidebar();
        }
      }
      
      // 处理窗口大小变化
      function handleResize() {
        const sidebar = document.getElementById('sidebar');
        
        if (window.innerWidth >= 768) {
          sidebar.classList.remove('-translate-x-full');
        } else if (emailDetailSidebar.classList.contains('translate-x-full')) {
          sidebar.classList.add('-translate-x-full');
        }
      }
      
      // 初始化应用
      initApp();
    });
  </script>
</body>
</html>